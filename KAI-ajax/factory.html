<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
        integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">

</head>
<body>
    
    <div class="jumbotron" id="myJumbotron">
        <button type="button" class="btn btn-primary" id="myBtn">GET_DATA</button>
    </div>

    <p id="myP"></p>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
    integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js"
    integrity="sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2" crossorigin="anonymous">
    </script>
    
    <!-- axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<script>



    const myJumbotron = $('#myJumbotron');
    const myBtn = $('#myBtn');





    myBtn.click(function () {
        $(this).next('div').remove();
        axios.get("./factory.json")
            .then(function (res) {
                console.log(res);
                
                let data = res.data;
                console.log("data",data);
                
                let dataText = ""
                data.forEach(myfunction);
                function myfunction(item, index) {
                    dataText += `<p>${item.id}-${item.name}</p>`;
                    console.log("index",index[0]);
                }


                $('#myP').append(dataText);

            })
            .catch(function (error) {
                        // handle error
                        console.log(error);
                        let redText = `
                            <div class="alert alert-danger alert-dismissible mt-5">
                            <button type="button" class="close" data-dismiss="alert">&times;</button>
                            <strong>Success!</strong> 
                            <p>
                               請檢查連線狀態
                            </p>
                            </div>
                            `;
                        myJumbotron.append(redText);
                    })
            .then(function () {
  
            });



    })
        
    </script>

</body>
</html>